Spring boot initializer https://start.spring.io/index.html
Java 17, properties, maven

dependite h2, spring web, spring data jpa, thymeleaf

baza de date

spring.application.name=OrderProject-MVC
server.port=8080

# === H2 DATABASE ===
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# === JPA / HIBERNATE ===
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create
spring.jpa.show-sql=false

spring.h2.console.enabled=true
spring.h2.console.path=/h2

//Many to many 
Complaint ↔ Product (o reclamație poate include mai multe produse/servicii, un produs poate apărea în multe reclamații)
@Entity
@Table(name = "complaints")
public class Complaint {
  @Id @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Long id;

  @ManyToMany
  @JoinTable(
      name = "complaint_items",
      joinColumns = @JoinColumn(name = "complaint_id"),
      inverseJoinColumns = @JoinColumn(name = "product_id")
  )
  private Set<Product> items = new HashSet<>();

  // restul câmpurilor: client, status, title etc.
}


@Entity
@Table(name = "products")
public class Product {
  @Id
  private String id;

  private String name;

  @ManyToMany(mappedBy = "items")
  private Set<Complaint> complaints = new HashSet<>();
}

//SPECIFICATION SERVICIU APEL public List<Order> search(Map<FilterSpecification, String> filters) {
    Specification<Order> spec = Specification.where(null);

    for (var entry : filters.entrySet()) {
        if (entry.getValue() == null || entry.getValue().isBlank()) continue;

        Specification<Order> part = specificationFactory
                .getSpecification(entry.getKey())
                .getOrdersSpecification(entry.getValue());

        spec = spec.and(part);
    }

    return orderRepository.findAll(spec);
}

